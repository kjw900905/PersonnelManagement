<!--?xml version="1.0" encoding="UTF-8"? -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="hdayExtnNightWorkInqr">
<<<<<<< HEAD
	<select id="" parameterType="" resultType="">
=======
	<select id="readHdayExtnNightWorkInqr" parameterType="HashMap" resultType="HashMap">
			SELECT E.EMP_EMNO  								AS empEmno 	/*사원번호*/
			     , E.EMP_NAME  								AS empName	/*사원이름*/	
			     , E.RANK_CODE 								AS rankCode	/*직위/직급코드*/		
			     , E.DEPT_CODE 								AS depCode  /*부서코드*/
			     , (SELECT A.ATTENDANCE_TYPE 
			     	  FROM ATTENDANCE A 
			     	 WHERE 1=1 
			     	   AND A.ATTENDANCE_C = C.ATTENDANCE_C) AS attendanceType /*근태종류*/
			     , C.COST_WRK_TIME 							AS costWrkTime    /*근태시간*/
			     , SUBSTRING(C.COST_WRK_IN, 1, 8) 			AS costWrkIn      /*근태일자*/
			  FROM COMM_STM C
   LEFT OUTER JOIN EMPLOYEE E
		        ON C.EMP_EMNO = E.EMP_EMNO 
			 WHERE 1=1
			 <if test="empEmno != null and empEmno != ''">
			   AND C.EMP_EMNO = #{empEmno}
			 </if>
			 <if test="workYyMm != null and workYyMm != ''">
			   AND SUBSTRING(C.COST_WRK_IN, 1, 6) = REPLACE(#{workYyMm}, '-', '')
			 </if>
			   AND C.ATTENDANCE_C IN ('W2', 'W3', 'W4')
			 ;
>>>>>>> origin/제영호
	</select>
</mapper>